<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>

<VBox alignment="TOP_CENTER" prefHeight="640" prefWidth="820" spacing="12" style="-fx-background-color: #d2e0da;" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.lojaprodutos.controller.MainController">

    <padding>
        <Insets bottom="16" left="16" right="16" top="16" />
    </padding>

    <!-- Cabeçalho -->
    <HBox alignment="CENTER_LEFT" spacing="10" VBox.vgrow="NEVER">
        <Label style="-fx-font-size:20px; -fx-font-weight:600;" text="Gerenciador de Produtos" />
        <Region HBox.hgrow="ALWAYS" />
        <Button fx:id="btnRelatorios" onAction="#abrirRelatorios" prefHeight="30" style="-fx-background-color: #1e6649;" text="Relatórios" textFill="WHITE" />
    </HBox>

    <!-- Formulário -->
    <GridPane hgap="10" vgap="8">
        <columnConstraints>
            <ColumnConstraints percentWidth="25" />
            <ColumnConstraints percentWidth="25" />
            <ColumnConstraints percentWidth="25" />
            <ColumnConstraints percentWidth="25" />
        </columnConstraints>

        <!-- Linha 0 -->
        <Label text="Código" GridPane.columnIndex="0" GridPane.rowIndex="0" />
        <TextField fx:id="inputCodigo" promptText="ex: 1001" GridPane.columnIndex="1" GridPane.rowIndex="0" />

        <Label text="Categoria" GridPane.columnIndex="2" GridPane.rowIndex="0" />
        <ComboBox fx:id="comboCategoria" promptText="Selecione" style="-fx-background-color: #e8efec;" GridPane.columnIndex="3" GridPane.rowIndex="0" />

        <!-- Linha 1 -->
        <Label text="Nome" GridPane.columnIndex="0" GridPane.rowIndex="1" />
        <TextField fx:id="inputNome" promptText="Nome do produto" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="1" />

        <!-- Linha 2 -->
        <Label text="Descrição" GridPane.columnIndex="0" GridPane.rowIndex="2" />
        <TextArea fx:id="inputDescricao" prefRowCount="2" promptText="Descrição (opcional)" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="2" />

        <!-- Linha 3 -->
        <Label text="Data Fabricação" GridPane.columnIndex="0" GridPane.rowIndex="3" />
        <DatePicker fx:id="inputDataFab" GridPane.columnIndex="1" GridPane.rowIndex="3" />

        <Label text="Data Validade" GridPane.columnIndex="2" GridPane.rowIndex="3" />
        <DatePicker fx:id="inputDataVal" GridPane.columnIndex="3" GridPane.rowIndex="3" />

        <!-- Linha 4 -->
        <Label text="Preço Compra" GridPane.columnIndex="0" GridPane.rowIndex="4" />
        <TextField fx:id="inputPrecoCompra" promptText="0.00" GridPane.columnIndex="1" GridPane.rowIndex="4" />

        <Label text="Preço Venda" GridPane.columnIndex="2" GridPane.rowIndex="4" />
        <TextField fx:id="inputPrecoVenda" promptText="0.00" GridPane.columnIndex="3" GridPane.rowIndex="4" />

        <!-- Linha 5 -->
        <Label text="Quantidade" GridPane.columnIndex="0" GridPane.rowIndex="5" />
        <Spinner fx:id="spinnerQtd" GridPane.columnIndex="1" GridPane.rowIndex="5" />
    </GridPane>

    <!-- Botões -->
    <HBox alignment="CENTER_LEFT" spacing="10">
        <Button onAction="#salvarProduto" prefWidth="110" style="-fx-background-color: #1e6649;" text="Salvar" textFill="WHITE" />
        <Button onAction="#editarProduto" prefWidth="110" style="-fx-background-color: #1e6649;" text="Editar" textFill="WHITE" />
        <Button onAction="#removerProduto" prefWidth="110" style="-fx-background-color: #1e6649;" text="Remover" textFill="WHITE" />
        <Button onAction="#consultarPorCodigo" prefWidth="110" style="-fx-background-color: #1e6649;" text="Consultar" textFill="WHITE" />
        <Button onAction="#onListar" prefWidth="120" style="-fx-background-color: #1e6649;" text="Listar Todos" textFill="WHITE" />
        <Button onAction="#limparFormulario" prefWidth="90" style="-fx-background-color: #1e6649;" text="Limpar" textFill="WHITE" />
        <Region HBox.hgrow="ALWAYS" />
        <Button onAction="#exportarCSV" prefWidth="120" style="-fx-background-color: #1e6649;" text="Exportar CSV" textFill="WHITE" />
    </HBox>

    <!-- Tabela -->
    <TableView fx:id="tabelaProdutos" prefHeight="300" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn fx:id="colCodigo" prefWidth="110" text="Código" />
            <TableColumn fx:id="colNome" prefWidth="220" text="Nome" />
            <TableColumn fx:id="colCategoria" prefWidth="120" text="Categoria" />
            <TableColumn fx:id="colPrecoVenda" prefWidth="100" text="Preço Venda" />
            <TableColumn fx:id="colQtd" prefWidth="80" text="Estoque" />
            <TableColumn fx:id="colValidade" prefWidth="140" text="Validade" />
        </columns>
    </TableView>

    <Label style="-fx-font-size:11px; -fx-text-fill:#666;" text="Dica: Campos com * são obrigatórios. Todas as alterações são salvas no CSV." />
</VBox>
